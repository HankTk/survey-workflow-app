<div class="survey-page">
  <div class="page-header">
    <h1>アンケート管理</h1>
    <p>作成・編集したアンケートの一覧と管理を行います</p>
  </div>

  <!-- 新規作成ボタン -->
  <div class="header-actions">
    <button 
      mat-raised-button 
      color="primary" 
      (click)="createNewSurvey()"
      class="new-survey-button"
    >
      <mat-icon class="button-icon">add</mat-icon> 新規アンケート作成
    </button>
  </div>

  <!-- ローディング表示 -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>アンケートを読み込み中...</p>
  </div>

  <!-- アンケート一覧 -->
  <div *ngIf="!isLoading" class="surveys-section">
    <mat-card>
      <mat-card-header>
        <mat-card-title>保存されたアンケート</mat-card-title>
        <mat-card-subtitle>作成・編集したアンケートの一覧</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="surveys-list" *ngIf="surveys.length > 0; else noSurveys">
          <div 
            *ngFor="let survey of surveys" 
            class="survey-list-item"
            (click)="editSurvey(survey.id)"
          >
            <div class="survey-info">
              <h4>{{ survey.title }}</h4>
              <p class="survey-description" *ngIf="survey.description">
                {{ survey.description }}
              </p>
              <div class="survey-meta">
                <span class="survey-id">識別子: {{ survey.id }}</span>
                <span class="survey-sections">{{ survey.sections.length }} セクション</span>
                <span class="survey-questions">{{ getTotalQuestions(survey) }} 質問</span>
                <span class="survey-version" *ngIf="survey.metadata?.version">
                  バージョン {{ survey.metadata?.version }}
                </span>
              </div>
            </div>
            <div class="survey-actions">
              <button 
                mat-icon-button 
                (click)="duplicateSurvey(survey.id, $event)"
                matTooltip="複製"
                title="複製"
              >
                <mat-icon>content_copy</mat-icon>
              </button>
              <button 
                mat-icon-button 
                (click)="deleteSurvey(survey.id, $event)"
                matTooltip="削除"
                title="削除"
                [disabled]="isSampleSurvey(survey.id)"
                [class.disabled]="isSampleSurvey(survey.id)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
        </div>
        <ng-template #noSurveys>
          <div class="no-surveys">
            <p>保存されたアンケートがありません。</p>
            <p>新しいアンケートを作成してください。</p>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
</div>